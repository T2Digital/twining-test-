<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุงุญุฌุฒ ุฎุฏูุฉ ุชูุธูู ุงุญุชุฑุงููุฉ | ุชูููููุฌ</title>
  <meta name="description" content="ุงุญุตู ุนูู ุฎุฏูุงุช ุชูุธูู ุดุงููุฉ ููููุงุฒู ูุงูููุงุชุจ ูู ุชูููููุฌ. ุญุฌุฒ ุณูู ูุณุฑูุน ูุฌูุฏุฉ ุนุงููุฉ.">
  <meta name="keywords" content="ุชูุธูู ููุงุฒู, ุชูุธูู ููุงุชุจ, ุดุฑูุฉ ูุธุงูุฉ, ุชูููููุฌ">
  <meta name="theme-color" content="#e0f7fa">

  <!-- EmailJS Library -->
  <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    (function(){
      emailjs.init("sGBVVDlpms13iC8Lb");
    })();
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      direction: rtl;
      background: #e0f7fa;
      margin: 0;
      padding: 0;
    }
    .container {
      width: 90%;
      max-width: 400px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    select, input, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }
    .logo {
      width: 100px;
      height: auto;
      margin-bottom: 10px;
    }
    .serviceItem {
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 10px;
      margin-top: 10px;
      background: #f9f9f9;
    }
    .note {
      background: #fffae6;
      padding: 10px;
      border: 1px dashed #e0c200;
      margin-top: 10px;
      border-radius: 5px;
    }
    .success {
      background-color: #d4edda;
      color: #155724;
      padding: 15px;
      margin-top: 15px;
      border: 1px solid #c3e6cb;
      border-radius: 5px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://i.postimg.cc/bvjDNQ0j/Whats-App-Image-2025-04-07-at-21-17-23-e65cadc5-removebg-preview.png" alt="ุดุนุงุฑ ุงูุดุฑูุฉ" class="logo">
    <h2>ุทูุจ ุฎุฏูุฉ - ุชูููููุฌ ูุฎุฏูุงุช ุงููุธุงูุฉ</h2>
    <div id="servicesContainer">
      <div class="serviceItem">
        <label>ุงุฎุชุฑ ุงูุฎุฏูุฉ</label>
        <select class="service" onchange="calculatePrice()">
          <option value="35">ุฎุฏูุฉ ุชูุธูู ุนููู - 35 ุฌููู ูููุชุฑ</option>
          <option value="50">ุชูุธูู ูุง ุจุนุฏ ุงูุจูุงุก ูุงูุชุดุทูุจ - 50 ุฌููู ูููุชุฑ</option>
          <option value="75">ุชูุธูู ุดูุชุฉ ุงูุงููุงู ุงูุตูุงุนูุฉ - 75 ุฌููู</option>
                <option value="75">ุชูุธูู ููููุช ุนุงุฏู - 75 ุฌููู ูููุชุฑ</option>
                <option value="75">ุชูุธูู ููููุช ูุงููุฑ - 75 ุฌููู ูููุชุฑ</option>
                <option value="75">ุชูุธูู ูุฎุฏุงุช ุงูููุจ - 75 ุฌููู ูููุงุญุฏุฉ</option>
                <option value="600">ุชูุธูู ููุจุฉ ูข ููุนุฏ - 600 ุฌููู</option>
                <option value="750">ุชูุธูู ููุจุฉ ูฃ ููุนุฏ - 750 ุฌููู</option>
                <option value="1400">ุชูุธูู ูุชุจุฉ ุญุฑู ( L) - 1400 ุฌููู</option>
                <option value="75">ุชูุธูู ูุฎุฏุงุช ุตุบูุฑุฉ - 75 ุฌููู ูููุงุญุฏุฉ</option>
                <option value="100">ุชูุธูู ูุฎุฏุงุช ูุจูุฑุฉ - 100 ุฌููู ูููุงุญุฏุฉ</option>
                <option value="250">ุชูุธูู ูุฑุณู ุงูุชูุฑูู - 250 ุฌููู</option>
                <option value="200">ุชูุธูู ูุฑุณู ุตุงููู ูุฏ ุฎุดุจ - 200 ุฌููู</option>
                <option value="450">ุชูุธูู ููุชู - 450 ุฌููู</option>
                <option value="300">ุชูุธูู ูุฑุณู ุนุซูุงูู - 300 ุฌููู</option>
                <option value="150">ุชูุธูู ูุฑุณู ุณูุฑู ุธูุฑ ููุงุนุฏุฉ - 150 ุฌููู</option>
                <option value="100">ุชูุธูู ูุฑุณู ุณูุฑุฉ ูุงุนุฏุฉ ููุท - 100 ุฌููู</option>
                <option value="100">ุชูุธูู ูุฑุณู ุจุฏูู ุฐุฑุงุน ูุธูุฑ - 100 ุฌููู</option>
                <option value="300">ุชูุธูู ุดุงุฐูููุฌ - 300 ุฌููู</option>
                <option value="200">ุชูุธูู ูุฑุณู ูุฒุงุฒ - 200 ุฌููู</option>
                <option value="900">ุชูุธูู ูุฑุชุจุฉ ููุชุฌ ูขู - 900 ุฌููู</option>
                <option value="800">ุชูุธูู ูุฑุชุจุฉ ุฏูู ูกูจู ุณู - 800 ุฌููู</option>
                <option value="700">ุชูุธูู ูุฑุชุจุฉ ูููู ูกูฆู ุณู - 700 ุฌููู</option>
                <option value="700">ุชูุธูู ูุฑุชุจุฉ ุณูุฌู ูกูคู ุณู - 700 ุฌููู</option>
                <option value="150">ุชูุธูู ุดุจุงู ุบุฑูุฉ ุงููููุชุงู - 150 ุฌููู</option>
                <option value="300">ุชูุธูู ุจุงุจ ุจููููุฉ ุงููููุชุงู - 300 ุฌููู</option>
                <option value="750">ุงูุชูุธูู ุงููููู ุงูููุชุธู (10ุต - 6ู) ุจุฏูู ุฃุฏูุงุช - 750 ุฌููู</option>
        </select>
        <input type="number" class="area" placeholder="ุงูุนุฏุฏ ุฃู ุงููุณุงุญุฉ" oninput="calculatePrice()">
        <button onclick="removeService(this)">โ ุญุฐู</button>
      </div>
    </div>
    <button onclick="addService()">โ ุฅุถุงูุฉ ุฎุฏูุฉ ุฃุฎุฑู</button>
    <p>๐ฐ ุงูุณุนุฑ ุงูุฅุฌูุงูู: <span id="totalPrice">0</span> ุฌููู</p>
    <input type="text" id="name" placeholder="ุงูุงุณู" required>
    <input type="tel" id="phone" placeholder="ุฑูู ุงููุงุชู" required>
    <input type="text" id="address" placeholder="ุงูุนููุงู ุจุงูุชูุตูู" required>
    <input type="date" id="date" placeholder="ุญุฏุฏ ุชุงุฑูุฎ ุงูุญุฌุฒ" require>
    <select id="gender" required>
      <option value="ุฐูุฑ">ุฐูุฑ</option>
      <option value="ุฃูุซู">ุฃูุซู</option>
    </select>
    <textarea id="notes" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ"></textarea>
    <div class="note">
      ๐ต ูุฌุจ ุฏูุน ูุตู ูููุฉ ุงูุทูุจ ููุฏููุง (ุฃู <span id="halfPrice">0</span> ุฌููู)<br>
      ูุฑุฌู ุงูุชุญููู ุนูู ุฑูู ูุญูุธุฉ <strong>01116199928</strong> ูุฑูุน ุตูุฑุฉ ุฅุซุจุงุช ุงูุฏูุน.
    </div>
    <input type="file" id="paymentProof" accept="image/*" required>
    <button onclick="getLocation()">๐ ูุดุงุฑูุฉ ุงููููุน</button>
    <input type="text" id="location" placeholder="ูููุนู" readonly>
    <button onclick="sendWhatsApp()">๐ฒ ุชุฃููุฏ ุงูุญุฌุฒ ุนุจุฑ ูุงุชุณุงุจ</button>
    <div id="successMessage" class="success">โ ุชู ุชุฃููุฏ ุงูุญุฌุฒ ุจูุฌุงุญ.</div>
  </div>

  <script>
    function calculatePrice() {
      let total = 0;
      document.querySelectorAll('.serviceItem').forEach(item => {
        let price = parseFloat(item.querySelector('.service').value);
        let qty = parseFloat(item.querySelector('.area').value) || 1;
        total += price * qty;
      });
      document.getElementById("totalPrice").innerText = total;
      document.getElementById("halfPrice").innerText = Math.ceil(total / 2);
    }

    function addService() {
      let options = document.querySelector('.service').innerHTML;
      let div = document.createElement('div');
      div.className = 'serviceItem';
      div.innerHTML = `
        <label>ุงุฎุชุฑ ุงูุฎุฏูุฉ</label>
        <select class="service" onchange="calculatePrice()">${options}</select>
        <input type="number" class="area" placeholder="ุงูุนุฏุฏ ุฃู ุงููุณุงุญุฉ" oninput="calculatePrice()">
        <button onclick="removeService(this)">โ ุญุฐู</button>
      `;
      document.getElementById('servicesContainer').appendChild(div);
    }

    function removeService(button) {
      button.parentElement.remove();
      calculatePrice();
    }

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          document.getElementById("location").value = `https://www.google.com/maps?q=${lat},${lon}`;
        }, () => alert("ูุฑุฌู ุงูุณูุงุญ ุจุงููุตูู ุฅูู ุงููููุน"));
      } else {
        alert("ุงููุชุตูุญ ูุง ูุฏุนู ุงููููุน ุงูุฌุบุฑุงูู");
      }
    }

    async function sendWhatsApp() {
      const phoneNumber = "201021584901";
      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const address = document.getElementById("address").value.trim();
      const date = document.getElementById("date").value;
      const gender = document.getElementById("gender").value;
      const notes = document.getElementById("notes").value || "ูุง ููุฌุฏ";
      const location = document.getElementById("location").value || "ูู ูุชู ูุดุงุฑูุฉ ุงููููุน";
      const totalPrice = document.getElementById("totalPrice").innerText;
      const paymentProof = document.getElementById("paymentProof").files[0];
      if (!paymentProof) return alert("ูุฑุฌู ุฑูุน ุตูุฑุฉ ุฅุซุจุงุช ุงูุฏูุน.");

      const formDataImg = new FormData();
      formDataImg.append("image", paymentProof);
      const uploadRes = await fetch("https://api.imgbb.com/1/upload?key=bde613bd4475de5e00274a795091ba04", {
        method: "POST", body: formDataImg
      });
      const result = await uploadRes.json();
      const proofUrl = result.data.url;

      const services = [...document.querySelectorAll(".serviceItem")].map(item => {
        const serviceText = item.querySelector(".service").selectedOptions[0].text;
        const quantity = item.querySelector(".area").value || 1;
        return `${serviceText} - ${quantity}`;
      });

      // ุฅุฑุณุงู ุงูุฅูููู ุชููุงุฆููุง ุจุงุณุชุฎุฏุงู EmailJS
      emailjs.send("service_19gxbce", "template_xvxtz3v", {
        name, phone, gender, address, date, location, notes,
        totalPrice, services: services.join("\n"), proofUrl
      }).then(res => {
        console.log("ุชู ุฅุฑุณุงู ุงูุฅูููู ุจูุฌุงุญ", res);
      }).catch(err => {
        console.error("ูุดู ูู ุฅุฑุณุงู ุงูุฅูููู", err);
      });

      // ุฅุฑุณุงู ูุงุชุณุงุจ
      const message = `๐ค ุงูุงุณู: ${name}\n๐ซ ุงูููุน: ${gender}\n๐ ุงููุงุชู: ${phone}\n๐ ุงููููุน: ${location}\n๐ ุงูุนููุงู: ${address}\n๐ ุงูุชุงุฑูุฎ: ${date}\n๐ ููุงุญุธุงุช: ${notes}\n๐ฐ ุงูุณุนุฑ ุงูุฅุฌูุงูู: ${totalPrice} ุฌููู\n๐ฐ ุงูุฎุฏูุงุช:\n${services.join("\n")}\n๐ธ ุฅุซุจุงุช ุงูุฏูุน: ${proofUrl}`;
      const waUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
      window.open(waUrl, "_blank");

      document.getElementById("successMessage").style.display = "block";
    }
  </script>
</body>
</html>
